{"version":3,"sources":["../../../barber/js/main.js"],"names":["Main","pages","loadedPages","run","addSections","secondHash","hash","$_GET","initBind_phone","addPage","initApp","$body","$","i","length","append","page","func","Util","in_array","push","head","js","db","data","distDir","time","hasLoadJsCallBack","isIos","window","setTimeout","config","app","H5App","appCreator","init","noDie","launcher","vue","jump2index","jump2"],"mappings":";;;;;;IAAMA,I;AACF,oBAAc;AAAA;;AACV,aAAKC,KAAL,GAAa,CACT,OADS,EACD,YADC,EACY,eADZ,EAC4B,iBAD5B,CAAb;AAGA,aAAKC,WAAL,GAAmB,EAAnB;AACA,aAAKC,GAAL;AAEH;;;;8BACI;AACD,iBAAKC,WAAL;AACA,gBAAIC,aAAa,OAAjB;AACA,gBAAIC,OAAOC,MAAM,MAAN,CAAX;AACA,gBAAI,CAAC,CAACD,IAAN,EAAY;AACRD,6BAAaC,IAAb;AACA,oBAAIA,SAAS,YAAb,EAA2B;AACvB,yBAAKE,cAAL,CAAoBF,IAApB;AACH,iBAFD,MAEM;AACFD,iCAAa,OAAb;AACH;AACJ;AACD,iBAAKI,OAAL,CAAa,OAAb;AACA,iBAAKC,OAAL,CAAaL,UAAb;AACH;;;sCAEa;AACV,gBAAIM,QAAQC,EAAE,MAAF,CAAZ;AAAA,gBAAuBC,UAAvB;AACA,iBAAKA,IAAI,CAAT,EAAYA,IAAI,KAAKZ,KAAL,CAAWa,MAA3B,EAAmCD,GAAnC,EAAwC;AACpCF,sBAAMI,MAAN,CAAa,kBAAkB,KAAKd,KAAL,CAAWY,CAAX,CAAlB,GAAkC,kBAA/C;AACH;AACJ;;;gCAEOG,I,EAAMC,I,EAAM;AAChB,gBAAIC,KAAKC,QAAL,CAAc,KAAKjB,WAAnB,EAAgCc,IAAhC,CAAJ,EACI;AACJ,iBAAKd,WAAL,CAAiBkB,IAAjB,CAAsBJ,IAAtB;AACAK,iBAAKC,EAAL,CAAQ,CACDC,GAAGC,IAAH,CAAQC,OADP,qBAC8BT,IAD9B,WACwCU,IADxC,CAAR,EAEG,YAAM;AACLR,qBAAKS,iBAAL,CAAuBX,IAAvB,EAA4B,YAAI;AAC5B,wBAAGO,GAAGC,IAAH,CAAQI,KAAX,EAAiB;AACb;AACA;AACA;AACA;AACA;AACA;AACH;AACDC,2BAAOb,IAAP,IAAe,IAAIa,OAAOb,IAAP,CAAJ,CAAiBA,IAAjB,CAAf;AACA,wBAAI,CAAC,CAACC,IAAF,KAAW,KAAf,EAAsB;AAClBa,mCAAW,YAAY;AACnBb;AACH,yBAFD,EAEG,EAFH;AAGH;AACJ,iBAfD;AAgBH,aAnBD;AAoBH;;;gCAEOZ,U,EAAY;AAChB,gBAAIuB,QAAQL,GAAGC,IAAH,CAAQI,KAApB;AACA,gBAAIG,SAAS;AACT,2BAAW,IADF;AAET,+BAAe,OAFN;AAGT,+BAAe,UAHN;AAIT,8BAAc1B,UAJL;AAKT,4BAAY,OALH;AAMT,iCAAiB,SANR;AAOT,kCAAkB,WAPT;AAQT,kCAAkB,KART;AAST,kCAAkB;AATT,aAAb;AAWA,gBAAI2B,MAAM,IAAIC,KAAJ,CAAUF,MAAV,CAAV;AACAC,kBAAME,WAAWC,IAAX,CAAgBH,GAAhB,CAAN;AACAA,gBAAII,KAAJ,GAAY,IAAZ;AACAJ,gBAAIJ,KAAJ,GAAYA,KAAZ;AACAC,mBAAOG,GAAP,GAAaA,GAAb;AACA,iBAAKvB,OAAL,CAAa,UAAb,EAAwB,YAAI;AACxBuB,oBAAI7B,GAAJ;AACA2B,2BAAW,YAAU;AACjBO,6BAASC,GAAT,CAAaC,UAAb;AACH,iBAFD,EAEE,GAFF;AAGH,aALD;AAMH;;;uCAEcjC,I,EAAK;AAChB,iBAAKG,OAAL,CAAaH,IAAb;AACAY,iBAAKS,iBAAL,CAAuB,CAACrB,IAAD,EAAM,sBAAN,EAA6B,KAA7B,CAAvB,EAA4D,YAAI;AAC5D0B,oBAAIQ,KAAJ,CAAUlC,IAAV;AACH,aAFD;AAGH","file":"main.js","sourcesContent":["class Main{\r\n    constructor() {\r\n        this.pages = [\r\n            'index','bind_phone','turnover_rank','query_bind_code'\r\n        ];\r\n        this.loadedPages = [];\r\n        this.run();\r\n\r\n    }\r\n    run(){\r\n        this.addSections();\r\n        let secondHash = 'index';\r\n        let hash = $_GET['hash'];\r\n        if (!!hash) {\r\n            secondHash = hash;\r\n            if (hash === 'bind_phone') {\r\n                this.initBind_phone(hash);\r\n            } else{\r\n                secondHash = 'index';\r\n            }\r\n        }\r\n        this.addPage('index');\r\n        this.initApp(secondHash);\r\n    }\r\n\r\n    addSections() {\r\n        let $body = $('body'), i;\r\n        for (i = 0; i < this.pages.length; i++) {\r\n            $body.append('<section id=\"' + this.pages[i] + '_vue\"></section>');\r\n        }\r\n    }\r\n\r\n    addPage(page, func) {\r\n        if (Util.in_array(this.loadedPages, page))\r\n            return;\r\n        this.loadedPages.push(page);\r\n        head.js([\r\n            `${db.data.distDir}barber/pages/${page}.js${time}`\r\n        ], () => {\r\n            Util.hasLoadJsCallBack(page,()=>{\r\n                if(db.data.isIos){\r\n                    // alert(window[page])\r\n                    // try{\r\n                    //     alert(new window[page])\r\n                    // }catch (e){\r\n                    //     alert(e)\r\n                    // }\r\n                }\r\n                window[page] = new window[page](page);\r\n                if (!!func !== false) {\r\n                    setTimeout(function () {\r\n                        func();\r\n                    }, 80);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    initApp(secondHash) {\r\n        let isIos = db.data.isIos;\r\n        let config = {\r\n            'isDebug': true,\r\n            'projectName': 'myapp',\r\n            'defaultHash': 'launcher',\r\n            'secondHash': secondHash,\r\n            'mainHash': 'index',\r\n            'transitionTag': 'section',\r\n            'transitionName': 'transform',\r\n            'transitionTime': '0.3',\r\n            'transitionType': 'ease-in-out'\r\n        };\r\n        let app = new H5App(config);\r\n        app = appCreator.init(app);\r\n        app.noDie = true;\r\n        app.isIos = isIos;\r\n        window.app = app;\r\n        this.addPage('launcher',()=>{\r\n            app.run();\r\n            setTimeout(function(){\r\n                launcher.vue.jump2index();\r\n            },500);\r\n        });\r\n    }\r\n\r\n    initBind_phone(hash){\r\n        this.addPage(hash);\r\n        Util.hasLoadJsCallBack([hash,'launcher_hasCompiled','app'], ()=>{\r\n            app.jump2(hash);\r\n        });\r\n    }\r\n}"]}