{"version":3,"sources":["../../../barber/pages/turnover_rank.js"],"names":["turnover_rank","hash","css","html","console","log","vue","VueP","el","created","db","compiled","data","title","list","methods","init","Util","ajax","api","json","e","Message","toast","drawPic","getCTSTime","dataObj","inEach","money","date","dataArr","split","push","Date","UTC","Math","floor","chart","zoomType","text","subtitle","document","ontouchstart","undefined","xAxis","type","minRange","yAxis","legend","enabled","plotOptions","area","fillColor","linearGradient","x1","y1","x2","y2","stops","Highcharts","getOptions","colors","Color","setOpacity","get","marker","radius","lineWidth","states","hover","threshold","series","name","$","highcharts","remove","Page"],"mappings":"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","file":"turnover_rank.js","sourcesContent":["\r\nclass turnover_rank extends Page {\r\n    constructor(hash){\r\n        let css =\r\n            `\r\n<style>\r\n    #turnover_rank_vue .topNav{width:100%;background:#fff}\r\n    #turnover_rank_vue .topNav{height:7vh;justify-content:space-between;align-items:center}\r\n    #turnover_rank_vue .topNav>div{width:33.333333%}\r\n    #turnover_rank_vue .topNav>div:nth-of-type(2){justify-content:center;align-items:center}\r\n    #turnover_rank_vue .topNav>div:nth-of-type(3){justify-content:flex-end;align-items:center}\r\n    #turnover_rank_vue .topNav .leftImg{width:4vh;height:3vh;margin-left:3vh}\r\n    \r\n     #turnover_rank_vue .body{height:93vh;background:#f5f5f5}\r\n</style>\r\n`;\r\n        let html=\r\n            [`\r\n<div class=\"topNav pos_r\">\r\n    <div>\r\n        <img class=\"leftImg\" onclick=\"history.go(-1)\" src=\"./images/index/back.png\" />\r\n    </div>\r\n    <div style=\"font-size:5vw;font-weight:600\">{{title}}</div>\r\n    <div class=\"o0\">\r\n        <!--<span class=\"flex flex-center\">{{bottomItem.right_text}}</span>-->\r\n        <!--<img @click=\"rightClick($index)\" style=\"width:4vh;height:4vh;margin:0 2vh 0 2vh;\" :src=\"'./images/index/'+(bottomItem.right_img)\" />-->\r\n    </div>\r\n</div>\r\n`,`\r\n<div id=\"turnover_rank\" style=\"width: 100vw;height: 50vw;\"></div>\r\n<div style=\"background:#f5f5f5;padding:2vw;\" class=\"flex-column\">\r\n    <div class=\"flex-center-y\" v-for=\"barber in list\" style=\"border-bottom:solid 1px #f5f5f5;background:#fff;padding: 2vw;\">\r\n        <b style=\"width: 9vw\">{{$index+1}}. </b><img style=\"width:10vw;height:10vw;margin-left:1vw;margin-right:1vw;\" :src=\"barber.avt\"/> \r\n        <div style=\"width:42vw;font-size: 5vw;\">{{barber.name}}</div>\r\n        <div style=\"width:29vw;flex-direction:row-reverse;font-size:5vw;\" class=\"clred\">{{barber.money}}</div>\r\n        <img style=\"width:8vw;height:8vw;\" src=\"./images/turnover_rank/{{barber.isUp?'up':'down'}}.png\"/>\r\n    </div>\r\n   \r\n</div>\r\n`];\r\n        console.log(html);\r\n        super(hash, html, css);\r\n    }\r\n\r\n    vue_(){\r\n        this.vue = new VueP({\r\n            el: this.hash+'_vue',\r\n            created () {\r\n                this.db = db;\r\n            },\r\n            compiled () {\r\n\r\n            },\r\n            data: {\r\n                title:'',\r\n                list:'',\r\n            },\r\n            methods: {\r\n                init(){\r\n                    console.log('adfadf');\r\n                    Util.ajax(null, `${db.data.api}getRank.php`, (json) => {\r\n                        if(json.e !== 0){\r\n                            Message.toast('无法开始服务');\r\n                        }else{\r\n                            this.title = json.data.title;\r\n                            this.list = json.data.list;\r\n                            this.drawPic(json.data.data);\r\n                        }\r\n                    });\r\n                },\r\n                getCTSTime(){\r\n\r\n                },\r\n                drawPic(dataObj){\r\n                    var data = [];\r\n\r\n                    Util.inEach(dataObj,(money,date)=>{\r\n                        let dataArr = date.split('-');\r\n                        console.log(dataArr);\r\n                        data.push([Date.UTC(Math.floor(dataArr[0]),  Math.floor(dataArr[1])-1,  Math.floor(dataArr[2]),\r\n                            15, 59, 59), money]);\r\n                    });\r\n                    console.log(data);\r\n\r\n                    var chart = {\r\n                        zoomType: 'x'\r\n                    };\r\n                    var title = {\r\n                        //text: 'USD to EUR exchange rate from 2006 through 2008'\r\n                        text: ''\r\n                    };\r\n                    var subtitle = {\r\n                        text: document.ontouchstart === undefined ?\r\n                            'Click and drag in the plot area to zoom in' :\r\n                            ''\r\n                    };\r\n                    var xAxis = {\r\n                        type: 'datetime',\r\n                        //minRange: 3600000 // 1小时\r\n                        minRange: 86400000 // 1小时\r\n                    };\r\n                    var yAxis = {\r\n                        title: {\r\n                            text: '营业额'\r\n                        }\r\n                    };\r\n                    var legend = {\r\n                        enabled: false\r\n                    };\r\n                    var plotOptions = {\r\n                        area: {\r\n                            fillColor: {\r\n                                linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},\r\n                                stops: [\r\n                                    [0, Highcharts.getOptions().colors[0]],\r\n                                    [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]\r\n                                ]\r\n                            },\r\n                            marker: {\r\n                                radius: 2\r\n                            },\r\n                            lineWidth: 1,\r\n                            states: {\r\n                                hover: {\r\n                                    lineWidth: 1\r\n                                }\r\n                            },\r\n                            threshold: null\r\n                        }\r\n                    };\r\n\r\n                    var series= [{\r\n                        type: 'area',\r\n                        name: '营业额',\r\n                        //pointInterval: 600*1000,//10分钟记录一次\r\n                        //pointStart: startTime,\r\n                        data: data\r\n                    }];\r\n\r\n                    var json = {};\r\n                    json.chart = chart;\r\n                    json.title = title;\r\n                    json.subtitle = subtitle;\r\n                    json.legend = legend;\r\n                    json.xAxis = xAxis;\r\n                    json.yAxis = yAxis;\r\n                    json.series = series;\r\n                    json.plotOptions = plotOptions;\r\n                    // Highcharts.setOptions({ global: { useUTC: false } });\r\n                    console.log(json);\r\n                    $('#turnover_rank').highcharts(json);\r\n                    $('.highcharts-credits').remove();\r\n\r\n                },\r\n            }\r\n        });\r\n    }\r\n}"]}