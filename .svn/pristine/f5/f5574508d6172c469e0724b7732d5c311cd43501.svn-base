{"version":3,"sources":["../../../barber/js/appCreator.js"],"names":["appCreator","init","app","browser","WechatBrowser","screenWidth","$","window","width","screenWidth_04","subscribe","APP_EVENT_BEGIN_RIGHT_TO_LEFT","console","log","nextActive","getJqModal","stacks","length","nowActive","css","maxZindex","attr","publish","APP_EVENT_TRANSITION_END","isIos","APP_EVENT_BEGIN_LEFT_TO_RIGHT","transitionTag","hide","isDoingAnimation","APP_EVENT_ANIMATION_END"],"mappings":";;AACA,SAASA,UAAT,GAAqB,CAAE;AACvBA,WAAWC,IAAX,GAAkB,UAASC,GAAT,EAAa;AAC3B;AACA;AACA;AACA;AACA;AACAA,QAAIC,OAAJ,GAAc,IAAIC,aAAJ,EAAd;AACAF,QAAIG,WAAJ,GAAkBC,EAAEC,MAAF,EAAUC,KAAV,EAAlB;AACAN,QAAIO,cAAJ,GAAqBP,IAAIG,WAAJ,GAAgB,GAArC;;AAEAH,QAAIQ,SAAJ,CAAcR,IAAIS,6BAAlB,EAAgD,YAAW;AACvDC,gBAAQC,GAAR,CAAY,+BAAZ;AACA,YAAIC,aAAaZ,IAAIa,UAAJ,CAAeb,IAAIc,MAAJ,CAAWd,IAAIc,MAAJ,CAAWC,MAAX,GAAkB,CAA7B,CAAf,CAAjB;AACA,YAAIC,YAAYhB,IAAIa,UAAJ,CAAeb,IAAIc,MAAJ,CAAWd,IAAIc,MAAJ,CAAWC,MAAX,GAAkB,CAA7B,CAAf,CAAhB;AACAH,mBAAWK,GAAX,CAAe,SAAf,EAAyB,EAAEjB,IAAIkB,SAA/B;AACA,YAAGF,SAAH,EAAa;AACTA,sBAAUG,IAAV,CAAe,eAAf,EAA+B,CAA/B;AACH,SAFD,MAEK;AACDnB,gBAAIoB,OAAJ,CAAYpB,IAAIqB,wBAAhB,EADC,CACyC;AAC7C;AACDT,mBAAWO,IAAX,CAAgB,eAAhB,EAAgC,CAAhC;AACAP,mBAAWK,GAAX,CAAe;AACX,iCAAoB,gBADT;AAEX,yBAAY;AAFD,SAAf;AAIA,YAAGjB,IAAIsB,KAAP,EAAa;AACT,gBAAGN,SAAH,EAAa;AACTA,0BAAUC,GAAV,CAAc;AACV,yCAAoB,gBAAcjB,IAAIO,cAAlB,GAAiC,OAD3C;AAEV,iCAAY,gBAAcP,IAAIO,cAAlB,GAAiC;AAFnC,iBAAd;AAIH;AACJ;AAEJ,KAxBD;AAyBAP,QAAIQ,SAAJ,CAAcR,IAAIuB,6BAAlB,EAAgD,YAAW;AACvDb,gBAAQC,GAAR,CAAY,+BAAZ;AACA,YAAIC,aAAaZ,IAAIa,UAAJ,CAAeb,IAAIc,MAAJ,CAAWd,IAAIc,MAAJ,CAAWC,MAAX,GAAkB,CAA7B,CAAf,CAAjB;AACA,YAAIC,YAAYhB,IAAIa,UAAJ,CAAeb,IAAIc,MAAJ,CAAWd,IAAIc,MAAJ,CAAWC,MAAX,GAAkB,CAA7B,CAAf,CAAhB;AACAC,kBAAUG,IAAV,CAAe,eAAf,EAA+B,CAA/B;AACAH,kBAAUC,GAAV,CAAc;AACV,iCAAoB,eAAajB,IAAIG,WAAjB,GAA6B,OADvC;AAEV,yBAAY,eAAaH,IAAIG,WAAjB,GAA6B;AAF/B,SAAd;AAIA,YAAGH,IAAIsB,KAAP,EAAa;AACTV,uBAAWK,GAAX,CAAe;AACX,qCAAoB,gBADT;AAEX,6BAAY;AAFD,aAAf;AAIH;AACJ,KAfD;AAgBAjB,QAAIQ,SAAJ,CAAcR,IAAIqB,wBAAlB,EAA2C,YAAW;AAClDX,gBAAQC,GAAR,CAAY,0BAAZ;AACAP,UAAEJ,IAAIwB,aAAJ,GAAkB,qBAApB,EAA2CL,IAA3C,CAAgD,eAAhD,EAAgE,CAAhE,EAAmEM,IAAnE;AACAzB,YAAI0B,gBAAJ,GAAuB,KAAvB;AACA1B,YAAIoB,OAAJ,CAAYpB,IAAI2B,uBAAhB;AACH,KALD;AAMA,WAAO3B,GAAP;AACH,CA1DD","file":"appCreator.js","sourcesContent":["\r\nfunction appCreator(){}\r\nappCreator.init = function(app){\r\n    // if(location.href.split('payqi').length >=2){\r\n    //     db.data.api = `https://www.jianyuepai.com.cn/api/barber/`;\r\n    // }else{\r\n    //     db.data.api = 'http://123.207.243.228/html/myapp/src/index.php';\r\n    // }\r\n    app.browser = new WechatBrowser();\r\n    app.screenWidth = $(window).width();\r\n    app.screenWidth_04 = app.screenWidth*0.4;\r\n\r\n    app.subscribe(app.APP_EVENT_BEGIN_RIGHT_TO_LEFT,function() {\r\n        console.log('APP_EVENT_BEGIN_RIGHT_TO_LEFT');\r\n        let nextActive = app.getJqModal(app.stacks[app.stacks.length-1]);\r\n        let nowActive = app.getJqModal(app.stacks[app.stacks.length-2]);\r\n        nextActive.css('z-index',++app.maxZindex);\r\n        if(nowActive){\r\n            nowActive.attr('data-willHide',1);\r\n        }else{\r\n            app.publish(app.APP_EVENT_TRANSITION_END);//第一次回没有对象\r\n        }\r\n        nextActive.attr('data-isActive',1);\r\n        nextActive.css({\r\n            '-webkit-transform':'translate(0,0)',\r\n            'transform':'translate(0,0)'\r\n        });\r\n        if(app.isIos){\r\n            if(nowActive){\r\n                nowActive.css({\r\n                    '-webkit-transform':'translate(-'+app.screenWidth_04+'px,0)',\r\n                    'transform':'translate(-'+app.screenWidth_04+'px,0)'\r\n                });\r\n            }\r\n        }\r\n\r\n    });\r\n    app.subscribe(app.APP_EVENT_BEGIN_LEFT_TO_RIGHT,function() {\r\n        console.log('APP_EVENT_BEGIN_LEFT_TO_RIGHT');\r\n        let nextActive = app.getJqModal(app.stacks[app.stacks.length-1]);\r\n        let nowActive = app.getJqModal(app.stacks[app.stacks.length-2]);\r\n        nowActive.attr('data-willHide',1);\r\n        nowActive.css({\r\n            '-webkit-transform':'translate('+app.screenWidth+'px,0)',\r\n            'transform':'translate('+app.screenWidth+'px,0)'\r\n        });\r\n        if(app.isIos){\r\n            nextActive.css({\r\n                '-webkit-transform':'translate(0,0)',\r\n                'transform':'translate(0,0)'\r\n            });\r\n        }\r\n    });\r\n    app.subscribe(app.APP_EVENT_TRANSITION_END,function() {\r\n        console.log('APP_EVENT_TRANSITION_END');\r\n        $(app.transitionTag+'[data-willHide=\"1\"]').attr('data-willHide',0).hide();\r\n        app.isDoingAnimation = false;\r\n        app.publish(app.APP_EVENT_ANIMATION_END);\r\n    });\r\n    return app;\r\n};"]}