{"version":3,"sources":["../../../../static/js/admin/admin_table_person.js"],"names":["getHtml","id","key","ids","hasOwnProperty","$","append","mobj","el","created","translate","compiled","init","data","tableName","val","count","m_rows","options_discount","options_service","computed","rows","get","set","_this","i","point","marker","lon","console","log","length","index","setTimeout","app","baiduMap","map","initAppMap","$el","attr","lat","getPoint","setCenter","getMarker","addMarker","addMapEventListener","e","message","lng","getPlaceByLatLon","geo_hash","GeoHash","encodeGeoHash","Message","getInstance","dialog","removeDialog","clearMap","methods","getPlaceByLatLon_CallBack","obj","area","city","district","dataStr","getRows","requirejs","BarberUtil","STUDIO_TABLE","TABLE","DISCOUNT_STRATEGY_TABLE","KEY","Util","ajax","db","api","controller","CODE","MESSAGE","toast","SERVICE_TABLE","keydown","event","scrollTop","target","css","height","set_one","confirm","AND_","JSON","stringify","add_one","imgChange","input","file","xhr","arr","imgNum","imgIndex","FormData","files","name","XMLHttpRequest","open","send","onload","json","parse","responseText","Api","parent","find","eq","push","img","join","onerror","err","error","deleteClick","evalString","eval"],"mappings":";;AAAA,CAAC,YAAU;AACP,QAAIA,UAAU,SAAVA,OAAU,CAASC,EAAT,EAAY;AACtB,eAAO,uFAIAA,EAJA,qOASYA,EATZ,k1DAAP;AA8CH,KA/CD;AAgDA,QAAIC,GAAJ;AACA,SAAIA,GAAJ,IAAWC,GAAX;AACI,YAAGA,IAAIC,cAAJ,CAAmBF,GAAnB,CAAH,EACIG,EAAE,aAAF,EAAiBC,MAAjB,CAAwBN,QAAQE,GAAR,CAAxB;AAFR;AAGH,CArDD;AAsDA,IAAIK,OAAO;AACPC,QAAI,EADG;AAEPC,aAAQ,mBAAU;AACd,aAAKC,SAAL,GAAiBA,SAAjB;AACH,KAJM;AAKPC,cAAS,oBAAY;AACjB,aAAKC,IAAL;AACH,KAPM;AAQPC,UAAK;AACDC,mBAAU,EADT;AAEDZ,aAAI,EAFH;AAGDa,aAAI,EAHH;AAIDC,eAAM,CAJL;AAKDC,gBAAO,EALN;AAMDC,0BAAiB,EANhB;AAODC,yBAAgB;AAPf,KARE;AAiBPC,cAAS;AACLC,cAAK;AACDC,iBAAI,eAAU;AACV,uBAAO,KAAKL,MAAZ;AACH,aAHA;AAIDM,iBAAI,aAASR,GAAT,EAAa;AACb,oBAAIS,QAAQ,IAAZ;AACA,oBAAIC,CAAJ,EAAMC,KAAN,EAAYC,MAAZ,EAAmBC,GAAnB;AACAC,wBAAQC,GAAR,CAAY,4BAAZ;AACAN,sBAAMP,MAAN,GAAeF,GAAf;AACA,qBAAIU,IAAE,CAAN,EAAQA,IAAED,MAAMH,IAAN,CAAWU,MAArB,EAA4BN,GAA5B,EAAgC;AAC5B,wBAAGD,MAAMH,IAAN,CAAWI,CAAX,EAAcrB,cAAd,CAA6B,KAA7B,CAAH,EAAuC;AACnCyB,gCAAQC,GAAR,CAAY,YAAZ;AACA,yBAAC,UAASE,KAAT,EAAgB;AACbC,uCAAW,YAAW;AAClB,oCAAG,CAAC,CAACC,IAAIC,QAAN,KAAmB,KAAtB,EACID,IAAIC,QAAJ,GAAe,EAAf;AACJD,oCAAIC,QAAJ,CAAaH,KAAb,IAAsBE,IAAIE,GAAJ,CAAQC,UAAR,CAAmBhC,EAAEmB,MAAMc,GAAR,EAAaC,IAAb,CAAkB,IAAlB,IAAwB,MAAxB,GAA+BP,KAAlD,CAAtB;AACA,oCAAGR,MAAMH,IAAN,CAAWW,KAAX,EAAkBJ,GAAlB,IAAuBJ,MAAMH,IAAN,CAAWW,KAAX,EAAkBQ,GAA5C,EACId,QAAQ,IAAIQ,IAAIE,GAAJ,CAAQK,QAAZ,CAAqBjB,MAAMH,IAAN,CAAWW,KAAX,EAAkBJ,GAAlB,GAAsB,OAA3C,EAAmDJ,MAAMH,IAAN,CAAWW,KAAX,EAAkBQ,GAAlB,GAAsB,OAAzE,CAAR,CADJ,KAGId,QAAQ,IAAIQ,IAAIE,GAAJ,CAAQK,QAAZ,CAAqB,GAArB,EAAyB,EAAzB,CAAR;AACJP,oCAAIE,GAAJ,CAAQM,SAAR,CAAkBR,IAAIC,QAAJ,CAAaH,KAAb,CAAlB,EAAuCN,KAAvC,EAA8C,CAA9C;AACAC,yCAAS,IAAIO,IAAIE,GAAJ,CAAQO,SAAZ,CAAsBjB,KAAtB,CAAT;AACAQ,oCAAIE,GAAJ,CAAQQ,SAAR,CAAkBV,IAAIC,QAAJ,CAAaH,KAAb,CAAlB,EAAuCL,MAAvC;AACAO,oCAAIE,GAAJ,CAAQS,mBAAR,CAA4BX,IAAIC,QAAJ,CAAaH,KAAb,CAA5B,EAAiD,OAAjD,EAA0D,UAASc,CAAT,EAAY;AAClE,wCAAIlB,GAAJ,EAAQY,GAAR,EAAYO,OAAZ;AACAnB,0CAAMkB,EAAEpB,KAAF,CAAQsB,GAAd;AACAR,0CAAMM,EAAEpB,KAAF,CAAQc,GAAd;AACA;AACAN,wCAAIE,GAAJ,CAAQa,gBAAR,CAAyBrB,GAAzB,EAA8BY,GAA9B,EAAmChB,KAAnC,EAA0CQ,KAA1C;AACAR,0CAAMH,IAAN,CAAWW,KAAX,EAAkBkB,QAAlB,GAA6BC,QAAQC,aAAR,CAAsBZ,GAAtB,EAA0BZ,GAA1B,CAA7B;AACAmB,8CAAU,UAAQnB,GAAR,GAAY,GAAZ,GAAgBY,GAAhB,GAAoB,SAA9B;AACAa,4CAAQC,WAAR,GAAsBC,MAAtB,CAA6B,IAA7B,EAAmCR,OAAnC,EAA4C,IAA5C,EAAkD,IAAlD,EAAuD,YAAU;AAC7DM,gDAAQC,WAAR,GAAsBE,YAAtB;AACAhC,8CAAMH,IAAN,CAAWW,KAAX,EAAkBJ,GAAlB,GAAwBA,MAAI,OAA5B;AACAJ,8CAAMH,IAAN,CAAWW,KAAX,EAAkBQ,GAAlB,GAAwBA,MAAI,OAA5B;AACAd,gDAAQ,IAAIQ,IAAIE,GAAJ,CAAQK,QAAZ,CAAqBb,GAArB,EAAyBY,GAAzB,CAAR;AACAN,4CAAIE,GAAJ,CAAQM,SAAR,CAAkBR,IAAIC,QAAJ,CAAaH,KAAb,CAAlB,EAAuCN,KAAvC,EAA8C,EAA9C;AACAQ,4CAAIE,GAAJ,CAAQqB,QAAR,CAAiBvB,IAAIC,QAAJ,CAAaH,KAAb,CAAjB;AACAL,iDAAS,IAAIO,IAAIE,GAAJ,CAAQO,SAAZ,CAAsBjB,KAAtB,CAAT;AACAQ,4CAAIE,GAAJ,CAAQQ,SAAR,CAAkBV,IAAIC,QAAJ,CAAaH,KAAb,CAAlB,EAAuCL,MAAvC;AACH,qCATD,EASE,YAAW;AACT0B,gDAAQC,WAAR,GAAsBE,YAAtB;AACH,qCAXD;AAYH,iCApBD;AAqBH,6BAhCD,EAgCE,GAhCF;AAiCH,yBAlCD,EAkCG/B,CAlCH;AAmCH;AACJ;AACJ;AAjDA;AADA,KAjBF;AAsEPiC,aAAQ;AACJC,mCAA0B,mCAASC,GAAT,EAAc5B,KAAd,EAAoB;AAC1C,iBAAKX,IAAL,CAAUW,KAAV,EAAiB6B,IAAjB,GAAwBD,IAAIE,IAAJ,GAAS,GAAT,GAAaF,IAAIG,QAAzC;AACH,SAHG;AAIJnD,cAAK,gBAAU;AACX,gBAAIY,QAAQ,IAAZ;AACA,gBAAIwC,OAAJ;AACA,iBAAKC,OAAL;AACAC,sBAAU,CAAC,oBAAD,CAAV,EAAkC,UAASC,UAAT,EAAoB;AAClD,oBAAG,KAAKrD,SAAL,KAAmBqD,WAAWC,YAAjC,EAA8C;AAC1CJ,8BAAU,MACN,GADM,GACFK,KADE,GACI,KADJ,GACUF,WAAWG,uBADrB,GAC6C,IAD7C,GAEN,GAFM,GAEFC,GAFE,GAEE,KAFF,GAEQ,KAAKrE,GAFb,GAEiB,GAFjB,GAGN,GAHJ;AAIAsE,yBAAKlB,WAAL,GAAmBmB,IAAnB,CAAwBT,OAAxB,EAAiCU,GAAG7D,IAAH,CAAQ8D,GAAR,GAAY,KAAZ,GAAkBC,UAAlB,GAA6B,cAA9D,EAA8E,UAAS/D,IAAT,EAAc;AACxF,4BAAGA,KAAKgE,IAAL,MAAe,CAAlB,EAAoB;AAChBrD,kCAAMN,gBAAN,GAAyBL,KAAKiE,OAAL,CAAzB;AACH,yBAFD,MAEK;AACDzB,oCAAQC,WAAR,GAAsByB,KAAtB,CAA4BlE,KAAKiE,OAAL,CAA5B,EAA0C,CAA1C;AACH;AACJ,qBAND;AAOH;;AAEDd,0BAAU,MACN,GADM,GACFK,KADE,GACI,KADJ,GACUF,WAAWa,aADrB,GACmC,GADnC,GAEN,GAFJ;AAGAR,qBAAKlB,WAAL,GAAmBmB,IAAnB,CAAwBT,OAAxB,EAAiCU,GAAG7D,IAAH,CAAQ8D,GAAR,GAAY,KAAZ,GAAkBC,UAAlB,GAA6B,cAA9D,EAA8E,UAAS/D,IAAT,EAAc;AACxF,wBAAGA,KAAKgE,IAAL,MAAe,CAAlB,EAAoB;AAChBrD,8BAAML,eAAN,GAAwBN,KAAKiE,OAAL,CAAxB;AACH,qBAFD,MAEK;AACDzB,gCAAQC,WAAR,GAAsByB,KAAtB,CAA4BlE,KAAKiE,OAAL,CAA5B,EAA0C,CAA1C;AACH;AACJ,iBAND;AAOH,aAzBD;AA0BH,SAlCG;AAmCJG,iBAAQ,iBAASC,KAAT,EAAe;AACnB,gBAAItB,GAAJ,EAAQuB,SAAR;AACAvB,kBAAMvD,EAAE6E,MAAME,MAAR,CAAN;AACAD,wBAAYvB,IAAIuB,SAAJ,EAAZ;AACA,gBAAGA,YAAW,CAAd,EAAgB;AACZvB,oBAAIyB,GAAJ,CAAQ,QAAR,EAAiBzB,IAAI0B,MAAJ,KAAeH,SAAf,GAA2B,EAA5C;AACH;AACJ,SA1CG;AA2CJlB,iBAAQ,mBAAU;AACd,gBAAIzC,QAAQ,IAAZ;AACA,gBAAIwC,UAAU,MACV,GADU,GACNK,KADM,GACA,KADA,GACM,KAAKvD,SADX,GACqB,IADrB,GAEV,GAFU,GAENyD,GAFM,GAEF,KAFE,GAEI,KAAKrE,GAFT,GAEa,GAFb,GAGV,GAHJ;AAIAsE,iBAAKlB,WAAL,GAAmBmB,IAAnB,CAAwBT,OAAxB,EAAiCU,GAAG7D,IAAH,CAAQ8D,GAAR,GAAY,KAAZ,GAAkBC,UAAlB,GAA6B,cAA9D,EAA8E,UAAS/D,IAAT,EAAc;AACxF,oBAAGA,KAAKgE,IAAL,MAAe,CAAlB,EAAoB;AAChBrD,0BAAMR,KAAN,GAAcH,KAAKiE,OAAL,EAAc/C,MAA5B;AACAP,0BAAMH,IAAN,GAAaR,KAAKiE,OAAL,CAAb;AACH,iBAHD,MAGK;AACDzB,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4BlE,KAAKiE,OAAL,CAA5B,EAA0C,CAA1C;AACH;AACJ,aAPD;AAQH,SAzDG;AA0DJS,iBAAQ,iBAASvD,KAAT,EAAe;AACnB,gBAAG,CAACwD,QAAQ,YAAR,CAAJ,EACI,OAAO,KAAP;AACJ,gBAAI5B,GAAJ,EAAQI,OAAR;AACAJ,kBAAM,KAAKvC,IAAL,CAAUW,KAAV,CAAN;AACAgC,sBAAU,MACN,GADM,GACFK,KADE,GACI,KADJ,GACU,KAAKvD,SADf,GACyB,IADzB,GAEN,GAFM,GAEFyD,GAFE,GAEE,KAFF,GAEQ,KAAKrE,GAFb,GAEiB,IAFjB,GAGN,GAHM,GAGFuF,IAHE,GAGG,UAHH,GAGc7B,IAAI,IAAJ,CAHd,GAGwB,IAHxB,GAIN,GAJM,GAIFkB,OAJE,GAIM,IAJN,GAIWY,KAAKC,SAAL,CAAe/B,GAAf,CAJX,GAKN,GALJ;AAMAY,iBAAKlB,WAAL,GAAmBmB,IAAnB,CAAwBT,OAAxB,EAAgCU,GAAG7D,IAAH,CAAQ8D,GAAR,GAAY,KAAZ,GAAkBC,UAAlB,GAA6B,aAA7D,EAA2E,UAAS/D,IAAT,EAAc;AACrF,oBAAIA,KAAKgE,IAAL,MAAe,CAAnB,EAAsB;AAClBxB,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4BlE,KAAKiE,OAAL,CAA5B,EAA2C,CAA3C;AACH,iBAFD,MAEO;AACHzB,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4B,MAA5B;AACH;AACJ,aAND;AAOH,SA5EG;AA6EJa,iBAAQ,mBAAU;AACd,gBAAIpE,QAAQ,IAAZ;AACA,gBAAG,CAACgE,QAAQ,YAAR,CAAJ,EACI,OAAO,KAAP;AACJ,gBAAIxB,UAAU,MACV,GADU,GACNK,KADM,GACA,KADA,GACM,KAAKvD,SADX,GACqB,IADrB,GAEV,GAFU,GAENyD,GAFM,GAEF,MAFE,GAEK,KAAKrE,GAFV,GAEc,QAFd,GAGV,GAHU,GAGN4E,OAHM,GAGE,MAHF,GAGS,KAAK5E,GAHd,GAGkB,OAHlB,GAIV,GAJJ;AAKAsE,iBAAKlB,WAAL,GAAmBmB,IAAnB,CAAwBT,OAAxB,EAAgCU,GAAG7D,IAAH,CAAQ8D,GAAR,GAAY,KAAZ,GAAkBC,UAAlB,GAA6B,UAA7D,EAAwE,UAAS/D,IAAT,EAAc;AAClF,oBAAIA,KAAKgE,IAAL,MAAe,CAAnB,EAAsB;AAClBxB,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4BlE,KAAKiE,OAAL,CAA5B,EAA2C,CAA3C;AACH,iBAFD,MAEO;AACHzB,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4B,MAA5B;AACAvD,0BAAMyC,OAAN;AACH;AACJ,aAPD;AAQH,SA9FG;AA+FJ4B,mBAAU,mBAASX,KAAT,EAAgBlD,KAAhB,EAAsB;AAC5B,gBAAIR,QAAQ,IAAZ;AACA,gBAAIsE,KAAJ;AAAA,gBAAUjF,IAAV;AAAA,gBAAeY,CAAf;AAAA,gBAAiBsE,IAAjB;AAAA,gBAAsBC,GAAtB;AAAA,gBAA0BC,MAAI,EAA9B;AAAA,gBAAiCC,MAAjC;AAAA,gBAAwCC,QAAxC;AAAA,gBAAiDlG,EAAjD;AACA6F,oBAAQZ,MAAME,MAAd;AACAvD,oBAAQC,GAAR,CAAY,WAAZ;AACAjB,mBAAO,IAAIuF,QAAJ,EAAP;AACA,iBAAK3E,IAAI,CAAT,EAAYA,IAAIqE,MAAMO,KAAN,CAAYtE,MAA5B,EAAoCN,GAApC,EAAyC;AACrC;AACAsE,uBAAOD,MAAMO,KAAN,CAAY5E,CAAZ,CAAP;AACAZ,qBAAKP,MAAL,CAAYyF,KAAKO,IAAjB,EAAuBP,IAAvB;AACH;AACDC,kBAAM,IAAIO,cAAJ,EAAN;AACAP,gBAAIQ,IAAJ,CAAS,MAAT,EAAiB9B,GAAG7D,IAAH,CAAQ8D,GAAR,GAAY,KAAZ,GAAkBC,UAAlB,GAA6B,cAA7B,GAA4C,KAAKvD,IAAL,CAAUW,KAAV,EAAiB/B,EAA7D,GAAgE,KAAhE,GAAsE,KAAKa,SAA5F,EAAuG,IAAvG;AACAkF,gBAAIS,IAAJ,CAAS5F,IAAT;AACAmF,gBAAIU,MAAJ,GAAa,YAAW;AACpB,oBAAIC,OAAOjB,KAAKkB,KAAL,CAAWZ,IAAIa,YAAf,CAAX;AACA,oBAAGF,KAAKG,IAAIjC,IAAT,MAAmB,CAAtB,EAAwB;AACpBhD,4BAAQC,GAAR,CAAY6E,KAAKG,IAAIhC,OAAT,CAAZ;AACAqB,+BAAW9F,EAAEyF,KAAF,EAASvD,IAAT,CAAc,OAAd,CAAX;AACAlC,sBAAEyF,KAAF,EAASiB,MAAT,GAAkBC,IAAlB,CAAuB,KAAvB,EAA8BC,EAA9B,CAAiCd,QAAjC,EAA2C5D,IAA3C,CAAgD,KAAhD,EAAuDoE,KAAKG,IAAIhC,OAAT,CAAvD;AACAoB,6BAAS7F,EAAEyF,KAAF,EAASiB,MAAT,GAAkBC,IAAlB,CAAuB,KAAvB,EAA8BjF,MAAvC;AACA,yBAAIN,IAAE,CAAN,EAAQA,IAAEyE,MAAV,EAAiBzE,GAAjB,EAAqB;AACjBwE,4BAAIiB,IAAJ,CAAS7G,EAAEyF,KAAF,EAASiB,MAAT,GAAkBC,IAAlB,CAAuB,KAAvB,EAA8BC,EAA9B,CAAiCxF,CAAjC,EAAoCc,IAApC,CAAyC,KAAzC,CAAT;AACH;AACDf,0BAAMH,IAAN,CAAWW,KAAX,EAAkBmF,GAAlB,GAAwBlB,IAAImB,IAAJ,CAAS,GAAT,CAAxB;AACH,iBATD,MASK;AACD/D,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4B4B,KAAKG,IAAIhC,OAAT,CAA5B;AACH;AACJ,aAdD;AAeAkB,gBAAIqB,OAAJ,GAAc,UAAUC,GAAV,EAAe;AACzBzF,wBAAQ0F,KAAR,CAAcD,GAAd;AACH,aAFD;AAGH,SA/HG;AAgIJE,qBAAY,qBAASxF,KAAT,EAAe;AACvB,gBAAIR,QAAQ,IAAZ;AACA,gBAAG,CAACgE,QAAQ,WAAR,CAAJ,EACI,OAAO,KAAP;AACJ,gBAAIxB,UAAU,MACV,GADU,GACNK,KADM,GACA,KADA,GACM,KAAKvD,SADX,GACqB,IADrB,GAEV,GAFU,GAENyD,GAFM,GAEF,KAFE,GAEI,KAAKrE,GAFT,GAEa,IAFb,GAGV,GAHU,GAGNuF,IAHM,GAGD,UAHC,GAGU,KAAKpE,IAAL,CAAUW,KAAV,EAAiB,IAAjB,CAHV,GAGiC,IAHjC,GAIV,GAJU,GAIN8C,OAJM,GAIE,gBAJF,GAKV,GALJ;AAMAN,iBAAKlB,WAAL,GAAmBmB,IAAnB,CAAwBT,OAAxB,EAAiCU,GAAG7D,IAAH,CAAQ8D,GAAR,GAAY,KAAZ,GAAkBC,UAAlB,GAA6B,aAA9D,EAA6E,UAAS/D,IAAT,EAAc;AACvF,oBAAIA,KAAKgE,IAAL,MAAe,CAAnB,EAAsB;AAClBxB,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4BlE,KAAKiE,OAAL,CAA5B,EAA2C,CAA3C;AACH,iBAFD,MAEO;AACHzB,4BAAQC,WAAR,GAAsByB,KAAtB,CAA4B,MAA5B;AACAvD,0BAAMyC,OAAN;AACH;AACJ,aAPD;AAQH;AAlJG;AAtED,CAAX;;AA4NA,IAAI/D,GAAJ,EAAQuH,UAAR;AACA,KAAIvH,GAAJ,IAAWC,GAAX,EAAe;;AAEX,QAAGA,IAAIC,cAAJ,CAAmBF,GAAnB,CAAH,EAA2B;AACvBuH,qBAAa,YACdvH,GADc,4FAGJA,GAHI,4CAIOC,IAAID,GAAJ,EAAS,WAAT,CAJP,kCAKCC,IAAID,GAAJ,EAAS,KAAT,CALD,sCAMMwF,KAAKC,SAAL,CAAexF,IAAID,GAAJ,EAAS,WAAT,CAAf,CANN,8RAAb;AAwBAwH,aAAKD,UAAL;AACH;AACJ","file":"admin_table_person.js","sourcesContent":["(function(){\r\n    var getHtml = function(id){\r\n        return `\r\n<style>\r\ntextarea{width:100px;height:auto;resize:none;}\r\n</style>\r\n<section id=\"`+id+`_vue\">\r\n    <iframe name=\"nm_iframe\" style=\"display:none;\"></iframe>\r\n    <div v-for=\"obj in rows\" >\r\n        <div class=\"form-group\" v-for=\"o in canUpdate\">\r\n            <div v-if=\"o=='lon'\">\r\n                <div id=\"`+id+`_vue_map{{$parent.$index}}\" class=\"w100\" style=\"height:200px;\"></div>\r\n            </div>\r\n            <div v-if=\"o=='img'\">\r\n                <label>{{o}}</label>\r\n                <input style=\"height:0;width:0\" class=\"form-control o0\" v-model=\"obj[o]\" type=\"text\" :placeholder=\"'请输入'+translate[o]\">\r\n                <input type=\"file\" title=\"0\" @change=\"imgChange($event, $parent.$index)\">\r\n                <img class=\"w100\" :src=\"obj[o]\" />\r\n            </div>\r\n            <div v-if=\"o=='status'\">\r\n                <button class=\"btn btn-danger btn-lg\" @click=\"deleteClick($parent.$index)\">删除</button>\r\n            </div>\r\n            \r\n            <div v-if=\"o=='service'\">\r\n               <label>{{o}}</label>\r\n                <select v-model=\"obj[o]\">\r\n                     <option v-for=\"option in options_service\" value=\"{{option.id}}\">{{option.name}}</option>\r\n                </select>\r\n            </div>\r\n            \r\n            <div v-if=\"o=='discount_id'\">\r\n               <label>{{o}}</label>\r\n                <select v-model=\"obj[o]\">\r\n                    <option v-for=\"option in options_discount\" value=\"{{option.id}}\">{{option.name}}</option>\r\n                </select>\r\n            </div>\r\n            \r\n            <div v-if=\"(o!='lon'&&o!='lat'&&o!='id'&&o!='img'&&o!='area'&&o!='geo_hash'&&o!='status'&&o!='discount_id'&&o!='service'&&o)\">\r\n                <label>{{o}}</label>\r\n                <input class=\"form-control\" v-model=\"obj[o]\" type=\"text\" :placeholder=\"'请输入'+translate[o]\">\r\n            </div>\r\n        </div>\r\n        <button class=\"{{(count==0)?'disn':''}} btn btn-success btn-lg\" @click=\"set_one($index)\">保存</button>\r\n         <hr />\r\n    </div>\r\n    <button class=\"btn btn-primary btn-lg\" @click=\"add_one()\">新建</button>\r\n</section>\r\n`\r\n    };\r\n    var key;\r\n    for(key in ids)\r\n        if(ids.hasOwnProperty(key))\r\n            $(\".right-area\").append(getHtml(key));\r\n})();\r\nvar mobj = {\r\n    el: '',\r\n    created:function(){\r\n        this.translate = translate;\r\n    },\r\n    compiled:function () {\r\n        this.init();\r\n    },\r\n    data:{\r\n        tableName:'',\r\n        key:'',\r\n        val:'',\r\n        count:0,\r\n        m_rows:[],\r\n        options_discount:[],\r\n        options_service:[],\r\n    },\r\n    computed:{\r\n        rows:{\r\n            get:function(){\r\n                return this.m_rows;\r\n            },\r\n            set:function(val){\r\n                var _this = this;\r\n                var i,point,marker,lon;\r\n                console.log('set set set info info info');\r\n                _this.m_rows = val;\r\n                for(i=0;i<_this.rows.length;i++){\r\n                    if(_this.rows[i].hasOwnProperty('lon')){\r\n                        console.log('make a map');\r\n                        (function(index) {\r\n                            setTimeout(function() {\r\n                                if(!!app.baiduMap === false)\r\n                                    app.baiduMap = [];\r\n                                app.baiduMap[index] = app.map.initAppMap($(_this.$el).attr('id')+\"_map\"+index);\r\n                                if(_this.rows[index].lon&&_this.rows[index].lat)\r\n                                    point = new app.map.getPoint(_this.rows[index].lon/1000000,_this.rows[index].lat/1000000);\r\n                                else\r\n                                    point = new app.map.getPoint(113,22);\r\n                                app.map.setCenter(app.baiduMap[index], point, 9);\r\n                                marker = new app.map.getMarker(point);\r\n                                app.map.addMarker(app.baiduMap[index], marker);\r\n                                app.map.addMapEventListener(app.baiduMap[index], \"click\", function(e) {\r\n                                    var lon,lat,message;\r\n                                    lon = e.point.lng;\r\n                                    lat = e.point.lat;\r\n                                    //得到 area 信息\r\n                                    app.map.getPlaceByLatLon(lon, lat, _this, index);\r\n                                    _this.rows[index].geo_hash = GeoHash.encodeGeoHash(lat,lon);\r\n                                    message = \"你想要设置\"+lon+','+lat+\"为范围中心吗?\";\r\n                                    Message.getInstance().dialog('提示', message, '确定', '取消',function(){\r\n                                        Message.getInstance().removeDialog();\r\n                                        _this.rows[index].lon = lon*1000000;\r\n                                        _this.rows[index].lat = lat*1000000;\r\n                                        point = new app.map.getPoint(lon,lat);\r\n                                        app.map.setCenter(app.baiduMap[index], point, 15);\r\n                                        app.map.clearMap(app.baiduMap[index]);\r\n                                        marker = new app.map.getMarker(point);\r\n                                        app.map.addMarker(app.baiduMap[index], marker);\r\n                                    },function() {\r\n                                        Message.getInstance().removeDialog();\r\n                                    });\r\n                                });\r\n                            },500);\r\n                        })(i);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    methods:{\r\n        getPlaceByLatLon_CallBack:function(obj, index){\r\n            this.rows[index].area = obj.city+','+obj.district;\r\n        },\r\n        init:function(){\r\n            var _this = this;\r\n            var dataStr;\r\n            this.getRows();\r\n            requirejs(['user/js/BarberUtil'], function(BarberUtil){\r\n                if(this.tableName === BarberUtil.STUDIO_TABLE){\r\n                    dataStr = '{' +\r\n                        '\"'+TABLE+'\":\"'+BarberUtil.DISCOUNT_STRATEGY_TABLE+'\",' +\r\n                        '\"'+KEY+'\":\"'+this.key+'\"'+\r\n                        '}';\r\n                    Util.getInstance().ajax(dataStr, db.data.api+'?r='+controller+'/Get_obj_arr', function(data){\r\n                        if(data[CODE] === 0){\r\n                            _this.options_discount = data[MESSAGE];\r\n                        }else{\r\n                            Message.getInstance().toast(data[MESSAGE],3);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                dataStr = '{' +\r\n                    '\"'+TABLE+'\":\"'+BarberUtil.SERVICE_TABLE+'\"' +\r\n                    '}';\r\n                Util.getInstance().ajax(dataStr, db.data.api+'?r='+controller+'/Get_obj_arr', function(data){\r\n                    if(data[CODE] === 0){\r\n                        _this.options_service = data[MESSAGE];\r\n                    }else{\r\n                        Message.getInstance().toast(data[MESSAGE],3);\r\n                    }\r\n                });\r\n            });\r\n        },\r\n        keydown:function(event){\r\n            var obj,scrollTop;\r\n            obj = $(event.target);\r\n            scrollTop = obj.scrollTop();\r\n            if(scrollTop >0){\r\n                obj.css('height',obj.height() + scrollTop + 20 );\r\n            }\r\n        },\r\n        getRows:function(){\r\n            var _this = this;\r\n            var dataStr = '{' +\r\n                '\"'+TABLE+'\":\"'+this.tableName+'\",' +\r\n                '\"'+KEY+'\":\"'+this.key+'\"'+\r\n                '}';\r\n            Util.getInstance().ajax(dataStr, db.data.api+'?r='+controller+'/Get_obj_arr', function(data){\r\n                if(data[CODE] === 0){\r\n                    _this.count = data[MESSAGE].length;\r\n                    _this.rows = data[MESSAGE];\r\n                }else{\r\n                    Message.getInstance().toast(data[MESSAGE],3);\r\n                }\r\n            });\r\n        },\r\n        set_one:function(index){\r\n            if(!confirm(\"确定要修改该条数据吗\"))\r\n                return false;\r\n            var obj,dataStr;\r\n            obj = this.rows[index];\r\n            dataStr = '{' +\r\n                '\"'+TABLE+'\":\"'+this.tableName+'\",' +\r\n                '\"'+KEY+'\":\"'+this.key+'\",' +\r\n                '\"'+AND_+'\":{\"id\":'+obj['id']+'},' +\r\n                '\"'+MESSAGE+'\":'+JSON.stringify(obj) +\r\n                '}';\r\n            Util.getInstance().ajax(dataStr,db.data.api+'?r='+controller+'/Update_obj',function(data){\r\n                if (data[CODE] !== 0) {\r\n                    Message.getInstance().toast(data[MESSAGE], 3);\r\n                } else {\r\n                    Message.getInstance().toast('更改成功');\r\n                }\r\n            });\r\n        },\r\n        add_one:function(){\r\n            var _this = this;\r\n            if(!confirm(\"确定要添加该条数据吗\"))\r\n                return false;\r\n            var dataStr = '{' +\r\n                '\"'+TABLE+'\":\"'+this.tableName+'\",' +\r\n                '\"'+KEY+'\":{\"'+this.key+'\":\"\"},' +\r\n                '\"'+MESSAGE+'\":{\"'+this.key+'\":\"\"}' +\r\n                '}';\r\n            Util.getInstance().ajax(dataStr,db.data.api+'?r='+controller+'/Add_obj',function(data){\r\n                if (data[CODE] !== 0) {\r\n                    Message.getInstance().toast(data[MESSAGE], 3);\r\n                } else {\r\n                    Message.getInstance().toast('添加成功');\r\n                    _this.getRows();\r\n                }\r\n            });\r\n        },\r\n        imgChange:function(event, index){\r\n            var _this = this;\r\n            var input,data,i,file,xhr,arr=[],imgNum,imgIndex,id;\r\n            input = event.target;\r\n            console.log('imgChange');\r\n            data = new FormData();\r\n            for (i = 0; i < input.files.length; i++) {\r\n                //file property: name, size, type, lastModifiedDate\r\n                file = input.files[i];\r\n                data.append(file.name, file);\r\n            }\r\n            xhr = new XMLHttpRequest();\r\n            xhr.open('post', db.data.api+'?r='+controller+'/set_img&id='+this.rows[index].id+'&t='+this.tableName, true);\r\n            xhr.send(data);\r\n            xhr.onload = function() {\r\n                var json = JSON.parse(xhr.responseText);\r\n                if(json[Api.CODE] === 0){\r\n                    console.log(json[Api.MESSAGE]);\r\n                    imgIndex = $(input).attr('title');\r\n                    $(input).parent().find('img').eq(imgIndex).attr('src', json[Api.MESSAGE]);\r\n                    imgNum = $(input).parent().find('img').length;\r\n                    for(i=0;i<imgNum;i++){\r\n                        arr.push($(input).parent().find('img').eq(i).attr('src'));\r\n                    }\r\n                    _this.rows[index].img = arr.join('|');\r\n                }else{\r\n                    Message.getInstance().toast(json[Api.MESSAGE]);\r\n                }\r\n            };\r\n            xhr.onerror = function (err) {\r\n                console.error(err);\r\n            };\r\n        },\r\n        deleteClick:function(index){\r\n            var _this = this;\r\n            if(!confirm(\"确定要删除！！！！\"))\r\n                return false;\r\n            var dataStr = '{' +\r\n                '\"'+TABLE+'\":\"'+this.tableName+'\",' +\r\n                '\"'+KEY+'\":\"'+this.key+'\",'+\r\n                '\"'+AND_+'\":{\"id\":'+this.rows[index]['id']+'},'+\r\n                '\"'+MESSAGE+'\":{\"status\":0}'+\r\n                '}';\r\n            Util.getInstance().ajax(dataStr, db.data.api+'?r='+controller+'/Update_obj', function(data){\r\n                if (data[CODE] !== 0) {\r\n                    Message.getInstance().toast(data[MESSAGE], 3);\r\n                } else {\r\n                    Message.getInstance().toast('删除成功');\r\n                    _this.getRows();\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nvar key,evalString;\r\nfor(key in ids){\r\n\r\n    if(ids.hasOwnProperty(key)){\r\n        evalString = `\r\n var `+key+` = (function(mobj){\r\n     var mo = Util.getInstance().clone(mobj);\r\n     mo.el = '#`+key+`_vue';\r\n     mo.data.tableName = '`+ids[key]['tableName']+`';\r\n     mo.data.key = '`+ids[key]['key']+`';\r\n     mo.data.canUpdate = `+JSON.stringify(ids[key]['canUpdate'])+`;\r\n\r\nfunction a(){}\r\na.getInstance = function () {\r\n    if (!this.self) {\r\n        this.self = new a();\r\n    }\r\n    return this.self;\r\n};\r\na.prototype.vue = null;\r\na.prototype.hash = '';\r\na.prototype.vue_ = function(){\r\n    this.vue = new VueP(mo);\r\n};\r\nreturn a;\r\n}(mobj));\r\n \r\n`;\r\n        eval(evalString);\r\n    }\r\n}\r\n"]}